(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f362"],{b350:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-contain",staticStyle:{"margin-top":"10px"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:7}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("个人信息")])]),a("el-row",{staticStyle:{"text-align":"center"}},[a("el-upload",{attrs:{action:"/api/student/upload/file",data:{folder:"image"},accept:".jpg,.png","show-file-list":!1,"on-success":e.uploadSuccess}},[a("el-avatar",{staticClass:"el-dropdown-avatar",attrs:{size:100,src:null===e.form.imagePath?r("1195"):e.form.imagePath}})],1)],1),a("el-row",{staticClass:"user-info-userName"},[a("label",[e._v(e._s(e.form.userName))])]),a("el-divider"),a("el-row",{staticClass:"user-info-fullInfo"},[a("label",[e._v("姓名："+e._s(e.form.realName))]),a("br"),a("label",[e._v("年级："+e._s(e.levelFormatter(e.form.userLevel)))]),a("br"),a("label",[e._v("班级："+e._s(e.form.classes))]),a("br"),a("label",[e._v("注册时间："+e._s(e.form.createTime))]),a("br")])],1)],1),a("el-col",{attrs:{span:17}},[a("el-card",{attrs:{shadow:"hover"}},[a("el-tabs",{attrs:{"active-name":"event",type:"card"}},[a("el-tab-pane",{attrs:{label:"用户动态",name:"event"}},[a("div",{staticClass:"block"},[a("el-timeline",e._l(e.event,(function(t){return a("el-timeline-item",{key:t.id,attrs:{timestamp:t.createTime,placement:"top"}},[a("el-card",[a("p",[e._v(e._s(t.content))])])],1)})),1)],1)]),a("el-tab-pane",{attrs:{label:"个人资料修改",name:"update"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{label:"真实姓名：",prop:"realName",required:""}},[a("el-input",{model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName",t)},expression:"form.realName"}})],1),a("el-form-item",{attrs:{label:"年龄："}},[a("el-input",{model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),a("el-form-item",{attrs:{label:"性别："}},[a("el-select",{attrs:{placeholder:"性别",clearable:""},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.sexEnum,(function(e){return a("el-option",{key:e.key,attrs:{value:e.key,label:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"出生日期："}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.birthDay,callback:function(t){e.$set(e.form,"birthDay",t)},expression:"form.birthDay"}})],1),a("el-form-item",{attrs:{label:"手机："}},[a("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"年级：",prop:"userLevel",required:""}},[a("el-select",{attrs:{placeholder:"年级"},model:{value:e.form.userLevel,callback:function(t){e.$set(e.form,"userLevel",t)},expression:"form.userLevel"}},e._l(e.levelEnum,(function(e){return a("el-option",{key:e.key,attrs:{value:e.key,label:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("更新")])],1)],1)],1)],1)],1)],1)],1)],1)},l=[],s=(r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),o=r("c24f"),n=r("2f62");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c={data:function(){return{event:[],form:{userName:"",realName:"",age:"",sex:"",birthDay:null,phone:null,userLevel:null,createTime:null,imagePath:null},formLoading:!1,rules:{realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],userLevel:[{required:!0,message:"请选择年级",trigger:"change"}]}}},created:function(){var e=this;o["a"].getUserEvent().then((function(t){e.event=t.response})),o["a"].getCurrentUser().then((function(t){e.form=t.response}))},methods:m({uploadSuccess:function(e,t){1===e.code?(this.form.imagePath=e.response,this.setImagePath(e.response)):this.$message.error(e.message)},submitForm:function(){var e=this,t=this;this.$refs.form.validate((function(r){if(!r)return!1;e.formLoading=!0,o["a"].update(e.form).then((function(e){1===e.code?t.$message.success(e.message):t.$message.error(e.message),t.formLoading=!1})).catch((function(e){t.formLoading=!1}))}))},levelFormatter:function(e){return this.enumFormat(this.levelEnum,e)}},Object(n["d"])("user",["setImagePath"])),computed:m({},Object(n["c"])("enumItem",["enumFormat"]),{},Object(n["e"])("enumItem",{sexEnum:function(e){return e.user.sexEnum},levelEnum:function(e){return e.user.levelEnum}}))},u=c,f=r("2877"),p=Object(f["a"])(u,a,l,!1,null,"29b8cb38",null);t["default"]=p.exports}}]);