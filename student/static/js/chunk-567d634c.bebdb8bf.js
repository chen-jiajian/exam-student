(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-567d634c"],{2071:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"line-height":"1.8"}},[1==t.qType?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.qLoading,expression:"qLoading"}]},[n("div",{staticClass:"q-title",domProps:{innerHTML:t._s(t.question.title)}}),n("div",{staticClass:"q-content"},[n("el-radio-group",{attrs:{size:"medium"},on:{change:function(e){t.answer.completed=!0}},model:{value:t.answer.content,callback:function(e){t.$set(t.answer,"content",e)},expression:"answer.content"}},t._l(t.question.items,(function(e){return n("el-radio",{key:e.prefix,attrs:{label:e.prefix,size:"medium"}},[n("span",{staticClass:"question-prefix"},[t._v(t._s(e.prefix)+".")]),n("span",{staticClass:"q-item-span-content",domProps:{innerHTML:t._s(e.content)}})])})),1)],1)]):2==t.qType?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.qLoading,expression:"qLoading"}]},[n("div",{staticClass:"q-title",domProps:{innerHTML:t._s(t.question.title)}}),n("div",{staticClass:"q-content"},[n("el-checkbox-group",{on:{change:function(e){t.answer.completed=!0}},model:{value:t.answer.contentArray,callback:function(e){t.$set(t.answer,"contentArray",e)},expression:"answer.contentArray"}},t._l(t.question.items,(function(e){return n("el-checkbox",{key:e.prefix,attrs:{label:e.prefix}},[n("span",{staticClass:"question-prefix"},[t._v(t._s(e.prefix)+".")]),n("span",{staticClass:"q-item-span-content",domProps:{innerHTML:t._s(e.content)}})])})),1)],1)]):3==t.qType?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.qLoading,expression:"qLoading"}]},[n("div",{staticClass:"q-title",staticStyle:{display:"inline","margin-right":"10px"},domProps:{innerHTML:t._s(t.question.title)}}),n("span",{staticStyle:{"padding-right":"10px"}},[t._v("(")]),n("el-radio-group",{on:{change:function(e){t.answer.completed=!0}},model:{value:t.answer.content,callback:function(e){t.$set(t.answer,"content",e)},expression:"answer.content"}},t._l(t.question.items,(function(e){return n("el-radio",{key:e.prefix,attrs:{label:e.prefix}},[n("span",{staticClass:"q-item-span-content",domProps:{innerHTML:t._s(e.content)}})])})),1),n("span",{staticStyle:{"padding-left":"10px"}},[t._v(")")])],1):4==t.qType?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.qLoading,expression:"qLoading"}]},[n("div",{staticClass:"q-title",domProps:{innerHTML:t._s(t.question.title)}}),n("div",t._l(t.question.items,(function(e){return n("el-form-item",{key:e.prefix,staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{label:e.prefix,"label-width":"50px"}},[n("div",{staticClass:"edit-preview"},[n("div",{staticClass:"edit-preview-prefix"},[n("el-input",{staticClass:"editor-input",attrs:{placeholder:"填写答案"},on:{focus:function(n){return t.inputClick(t.answer.contentArray,e.prefix-1)},change:function(e){t.answer.completed=!0}},model:{value:t.answer.contentArray[e.prefix-1],callback:function(n){t.$set(t.answer.contentArray,e.prefix-1,n)},expression:"answer.contentArray[item.prefix-1]"}})],1),n("div",{staticClass:"edit-preview-content",domProps:{innerHTML:t._s(t.answer.contentArray[e.prefix-1])}})])])})),1)]):5==t.qType?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.qLoading,expression:"qLoading"}]},[n("div",{staticClass:"q-title",domProps:{innerHTML:t._s(t.question.title)}}),n("div",{staticClass:"edit-preview",staticStyle:{padding:"10px 0"}},[n("div",{staticClass:"edit-preview-prefix"},[n("el-input",{staticClass:"editor-input",attrs:{placeholder:"填写答案"},on:{focus:function(e){return t.inputClick(t.answer,"content")},change:function(e){t.answer.completed=!0}},model:{value:t.answer.content,callback:function(e){t.$set(t.answer,"content",e)},expression:"answer.content"}})],1),n("div",{staticClass:"edit-preview-content",domProps:{innerHTML:t._s(t.answer.content)}})])]):n("div"),n("el-dialog",{staticStyle:{width:"100%",height:"100%"},attrs:{visible:t.richEditor.dialogVisible,"append-to-body":"","close-on-click-modal":!1,"show-close":!1,center:""},on:{"update:visible":function(e){return t.$set(t.richEditor,"dialogVisible",e)}}},[n("Ueditor",{on:{ready:t.editorReady}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.editorConfirm}},[t._v("确 定")]),n("el-button",{on:{click:function(e){t.richEditor.dialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)},r=[],s=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("script",{staticStyle:{height:"300px"},attrs:{id:t.randomId,type:"text/plain"}})])}),a=[],o={name:"UE",props:{value:{default:function(){return""}}},data:function(){return{randomId:"editor_"+1e17*Math.random(),instance:null,ready:!1}},watch:{value:function(t,e){null!=t&&this.ready&&(this.instance=UE.getEditor(this.randomId),this.instance.setContent(t))}},mounted:function(){this.initEditor()},beforeDestroy:function(){null!==this.instance&&this.instance.destroy&&this.instance.destroy()},methods:{initEditor:function(){var t=this;this.$nextTick((function(){t.instance=UE.getEditor(t.randomId,{enterTag:"br"}),t.instance.addListener("ready",(function(){t.ready=!0,t.$emit("ready",t.instance)}))}))},getUEContent:function(){return this.instance.getContent()},setText:function(t){this.instance=UE.getEditor(this.randomId),this.instance.setContent(t)}}},c=o,d=n("2877"),l=Object(d["a"])(c,s,a,!1,null,null,null),u=l.exports,m={components:{Ueditor:u},name:"QuestionEdit",data:function(){return{richEditor:{dialogVisible:!1,object:null,parameterName:"",instance:null}}},props:{question:{type:Object,default:function(){return{}}},answer:{type:Object,default:function(){return{id:null,content:"",contentArray:[]}}},qLoading:{type:Boolean,default:!1},qType:{type:Number,default:0}},methods:{editorReady:function(t){this.richEditor.instance=t;var e=this.richEditor.object[this.richEditor.parameterName];null!==e&&void 0!==e&&this.richEditor.instance.setContent(e),this.richEditor.instance.focus()},inputClick:function(t,e){this.richEditor.object=t,this.richEditor.parameterName=e,this.richEditor.dialogVisible=!0},editorConfirm:function(){var t=this;this.richEditor.instance.getKfContent((function(){var e=t.richEditor.instance.getContent();t.richEditor.object[t.richEditor.parameterName]=e,t.richEditor.dialogVisible=!1}))}}},p=m,f=Object(d["a"])(p,i,r,!1,null,null,null);e["a"]=f.exports},"4a0c":function(t,e,n){"use strict";var i=n("b775");e["a"]={select:function(t){return Object(i["a"])("/api/student/exam/paper/select/"+t)},pageList:function(t){return Object(i["a"])("/api/student/exam/paper/pageList",t)},build:function(t){return Object(i["a"])("/api/student/exam/paper/build",t)}}},"66f9":function(t,e,n){},"6cce":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{staticClass:"do-exam-title"},[n("el-col",{attrs:{span:24}},[n("span",{staticClass:"do-exam-time"},[n("label",[t._v("剩余时间：")]),n("label",[t._v(t._s(t.formatSeconds(t.remainTime)))])])])],1),n("div",{staticClass:"topic-card-btn"}),n("el-container",{staticClass:"app-item-contain"},[n("el-row",{staticClass:"topic-btn"},[n("el-button",{attrs:{type:"primary"},on:{click:t.lastTopic}},[t._v("上一题")]),n("el-button",{on:{click:t.nextTopic}},[t._v("下一题")]),n("el-button",{on:{click:function(e){t.questionCard=!0}}},[t._v("答题卡")])],1),n("el-header",{staticClass:"align-center"},[n("h1",[t._v(t._s(t.form.name))]),n("div",[n("span",{staticClass:"question-title-padding"},[t._v("试卷总分："+t._s(t.form.score))]),n("span",{staticClass:"question-title-padding"},[t._v("考试时间："+t._s(t.form.suggestTime)+"分钟")])])]),n("el-main",{staticClass:"topic-main"},[n("h3",[t.form.random?n("span",[t._v("随机题型")]):n("span",[t._v("正常题型")]),t._v(" "+t._s(t.currentIndex+1+" / "+t.normalQuestions.length))]),n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],ref:"form",attrs:{model:t.form,"label-width":"100px"}},[n("div",{staticClass:"exam-question-item"},[n("span",{staticClass:"question-index"},[t._v(t._s(t.currentIndex+1+"."))]),n("QuestionEdit",{attrs:{qType:t.topicItem.questionType,question:t.topicItem,answer:t.answer.answerItems[t.topicItem.itemOrder-1]}})],1),t.currentIndex===t.normalQuestions.length-1?n("el-row",{staticClass:"do-align-center"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提交")])],1):t._e()],1)],1)],1),n("el-dialog",{attrs:{title:"答题卡",visible:t.questionCard,width:"50%"},on:{"update:visible":function(e){t.questionCard=e}}},[n("div",{staticClass:"card-content"},t._l(t.normalQuestions,(function(e,i){return n("span",{key:e.itemOrder,staticClass:"card-item",on:{click:function(e){return t.selectTopic(i)}}},[t._v(" "+t._s(i+1)+" ")])})),0)])],1)},r=[],s=(n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),a=n("2f62"),o=n("ed08"),c=n("2071"),d=n("4a0c"),l=n("ed24");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p={components:{QuestionEdit:c["a"]},data:function(){return{form:{},formLoading:!1,answer:{questionId:null,doTime:0,answerItems:[]},timer:null,remainTime:0,remainStoreKey:null,answerStoreKey:null,randomQuestions:[],normalQuestions:[],currentIndex:0,questionCard:!1}},created:function(){var t=this.$route.query.id;this.remainStoreKey="xdd_remainTime_"+t+"_"+this.userName,this.answerStoreKey="xdd_answer_"+t+"_"+this.userName;var e=this;t&&0!==parseInt(t)&&(e.formLoading=!0,d["a"].select(t).then((function(t){var n=Object(o["d"])("MIICXgIBAAKBgQDsjj3bWRseE01sXElAsM8Ptqv8JXM7hjqpbnmqL38deBjo/9qDBgfGPCV2NfcJGpJjWSZQ1yEpYTUKPfAOE5h2gGxN0Hg97A/tL+G4u9RQFiEKiC6SgLpdNe3IvM0PsTnGHQ7i51cHy5FS9fmMLJvUUTXE82N9CgQXPVzhj8YksQIDAQABAoGBAOPKsYw5CSD0C3lOgQe3ex0xlfoQAiAOyQyBIs2cQTcagDpWro+/Tds57gUgQEvW96KNpZTxJLDZN58uN60Gd6fDN31I3yVjmvdDaLWtzrGJVoD8SqigPdfs6O9NaDRvDxkYrTYL3++ygaeCUuYr7KkfKSDNANNDzqaoUI1Q5iWxAkEA/HRlHqHQXCsjeBQMx+ESLr4AwLdP3uFSt66WXsKNMPKx8+Ea+QVSy5Hz2OgOlZ2cMuiIUTXe8fjp2pZdjYLDnQJBAO/gsAtoJ95q4A88m5dQpRBcdAbzfG7t1n17EtCQv0tc48jFfHGUIBr2q5tHoFN8YzT6/fPMzf6HXk+k7wEuqyUCQQDtBuuaIxtaLjaTG2AUmsFTmZljV7lp7eyYARe1yLx/5J4n+IY2oEToVRS55scqulxZf/HdLdMxJR+L1/nmT4wRAkB9t2ksIUM72xFgiugUboyDvaCFgBiH3phaHSVoL2RCMAWlVHL656HH391iPTC2cGth+eUcYArZycJQxWUJXpcNAkEAsQubPdWXqDxOCsFdgagOz2+Vq7xN6dme/BXOemTdHOZiRUyBGZoq3aMeHfNA027+mTIjRFuuI2ZwwIH9RzhJ2Q==",t.message),i=Object(o["a"])(n,t.response);e.form=JSON.parse(i),e.remainTime=60*e.form.suggestTime,e.initAnswer(),e.timeReduce(),e.formLoading=!1})))},mounted:function(){Object(o["b"])()},beforeDestroy:function(){window.clearInterval(this.timer)},methods:{formatSeconds:function(t){return Object(o["c"])(t)},timeReduce:function(){var t=this;this.timer=setInterval((function(){t.formLoading||(t.remainTime<=0?t.submitForm():(++t.answer.doTime,--t.remainTime))}),1e3)},questionCompleted:function(t){return this.enumFormat(this.doCompletedTag,t)},goAnchor:function(t){this.$el.querySelector(t).scrollIntoView({behavior:"instant",block:"center",inline:"nearest"})},initAnswer:function(){this.answer.id=this.form.id;var t=this.form.titleItems;for(var e in t){var n=t[e].questionItems;for(var i in n){var r=n[i];this.randomQuestions.push(r),this.normalQuestions.push(r),this.answer.answerItems.push({questionId:r.id,content:null,contentArray:[],completed:!1,itemOrder:r.itemOrder})}}this.form.random&&(this.normalQuestions.sort((function(){return Math.random()-.5})),this.randomQuestions.sort((function(){return Math.random()-.5})))},submitForm:function(){var t=this;window.clearInterval(t.timer),t.formLoading=!0,l["a"].answerSubmit(this.answer).then((function(e){1===e.code?t.$alert("试卷得分："+e.response+"分","考试结果",{confirmButtonText:"返回考试记录",callback:function(e){t.$router.push("/record/index")}}):t.$message.error(e.message),t.formLoading=!1})).catch((function(e){t.formLoading=!1}))},cancelForm:function(){window.close()},selectTopic:function(t){this.currentIndex=t,this.questionCard=!1},lastTopic:function(){this.currentIndex>0?this.currentIndex--:this.$message("已经是第一道题了")},nextTopic:function(){this.currentIndex<this.normalQuestions.length-1?this.currentIndex++:this.$message("已经是最后一道题了")}},computed:m({},Object(a["c"])("enumItem",["enumFormat"]),{},Object(a["e"])("enumItem",{doCompletedTag:function(t){return t.exam.question.answer.doCompletedTag}}),{},Object(a["e"])("user",{userName:function(t){return t.userName}}),{topicItem:function(t){return this.normalQuestions[this.currentIndex]}})},f=p,h=(n("caf7"),n("2877")),v=Object(h["a"])(f,i,r,!1,null,"07660a47",null);e["default"]=v.exports},caf7:function(t,e,n){"use strict";var i=n("66f9"),r=n.n(i);r.a},ed24:function(t,e,n){"use strict";var i=n("b775");e["a"]={pageList:function(t){return Object(i["a"])("/api/student/exampaper/answer/pageList",t)},answerSubmit:function(t){return Object(i["a"])("/api/student/exampaper/answer/answerSubmit",t)},read:function(t){return Object(i["a"])("/api/student/exampaper/answer/read/"+t)},edit:function(t){return Object(i["a"])("/api/student/exampaper/answer/edit",t)}}}}]);